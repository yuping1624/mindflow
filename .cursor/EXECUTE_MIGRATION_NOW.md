# âš¡ ç«‹å³åŸ·è¡Œ Migration

## ğŸ¯ å¿«é€ŸæŒ‡å¼•

æ ¹æ“šæ¸¬è©¦çµæœï¼Œç›®å‰è³‡æ–™åº«ä¸­**æ²’æœ‰ embeddings**ï¼ˆ0 å€‹ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥åŸ·è¡Œ migrationã€‚

---

## ğŸ“ Migration åŸ·è¡Œæ­¥é©Ÿ

### æ­¥é©Ÿ 1: é–‹å•Ÿ Supabase Dashboard

1. å‰å¾€ https://supabase.com/dashboard
2. é¸æ“‡ä½ çš„å°ˆæ¡ˆ
3. é»æ“Šå·¦å´é¸å–®çš„ **"SQL Editor"**
4. é»æ“Š **"New Query"**

### æ­¥é©Ÿ 2: åŸ·è¡Œ Migration

1. **é–‹å•Ÿæª”æ¡ˆ**ï¼š`db/migrate_to_384d.sql`
2. **è¤‡è£½å…¨éƒ¨å…§å®¹**ï¼ˆåŒ…æ‹¬ `BEGIN;` å’Œ `COMMIT;`ï¼‰
3. **è²¼ä¸Šåˆ° SQL Editor**
4. **é»æ“Š "Run"** æˆ–æŒ‰ `Cmd/Ctrl + Enter`

### æ­¥é©Ÿ 3: ç¢ºèªæˆåŠŸ

æ‡‰è©²çœ‹åˆ° "Success. No rows returned" æˆ–é¡ä¼¼çš„æˆåŠŸè¨Šæ¯ã€‚

---

## âœ… é©—è­‰ Migration

åŸ·è¡Œä»¥ä¸‹å‘½ä»¤é©—è­‰ migration æ˜¯å¦æˆåŠŸï¼š

```bash
npx tsx scripts/test_rag.ts
```

æˆ–è€…ä½¿ç”¨å¿«é€Ÿé©—è­‰ï¼š

```bash
./scripts/quick_verify_migration.sh
```

---

## ğŸ§ª æ¸¬è©¦ RAG åŠŸèƒ½

Migration å®Œæˆå¾Œï¼š

1. **å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨**ï¼š
   ```bash
   npm run dev
   ```

2. **å»ºç«‹æ¸¬è©¦ Entries**ï¼š
   - ç™»å…¥æ‡‰ç”¨ç¨‹å¼
   - å»ºç«‹ 2-3 å€‹ journal entriesï¼Œå…§å®¹ç›¸ä¼¼ï¼ˆä¾‹å¦‚éƒ½æåˆ° "work stress"ï¼‰
   - å»ºç«‹ä¸€å€‹æ–°çš„ entryï¼Œå…§å®¹èˆ‡ä¹‹å‰çš„ç›¸é—œ

3. **æª¢æŸ¥çµæœ**ï¼š
   - æ‰“é–‹æ–° entry çš„è©³ç´°é é¢
   - æ‡‰è©²çœ‹åˆ° "Related Past Entries" å€å¡Š
   - ç¢ºèªç›¸ä¼¼åº¦æ¨™ç±¤é¡¯ç¤ºæ­£ç¢º

---

## â“ éœ€è¦å¹«åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°å•é¡Œï¼Œè«‹æŸ¥çœ‹ï¼š
- `.cursor/MIGRATION_STEPS.md` - è©³ç´°çš„æ•…éšœæ’é™¤æŒ‡å—
- `db/MIGRATION_GUIDE_384D.md` - å®Œæ•´çš„ migration æŒ‡å—
